(window.webpackJsonppartnernetwork_vtex_services_1_6_6=window.webpackJsonppartnernetwork_vtex_services_1_6_6||[]).push([[2],{38:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n=[{id:"marketing",name:"Marketing",subcategories:[{id:"crm",name:"CRM"},{id:"atendimento-ao-cliente",name:"Atendimento ao cliente"},{id:"influenciador(a)",name:"Influenciador(a)"},{id:"busca-e-sugestoes",name:"Busca e sugestões"},{id:"fotos-e-videos",name:"Fotos e Videos"},{id:"automacao-chatbot-ura",name:"Automação (chatbot/URA)"},{id:"reviews",name:"Reviews"},{id:"design-and-ux",name:"Design & UX"}]},{id:"operacoes-e-fulfillment",name:"Operações e Fulfillment",subcategories:[{id:"inventario-armazenamento",name:"Inventário/Armazenamento"},{id:"logistica-transporte",name:"Logística/Transporte"},{id:"erp-gestao-de-catalogo-inventario",name:"ERP - gestão de catalogo/inventário"}]},{id:"gestao-de-ecommerce",name:"Gestão de Ecommerce",subcategories:[{id:"consultoria",name:"Consultoria"},{id:"treinamento-e-certificacao",name:"Treinamento e Certificação"},{id:"inteligencia-de-dados",name:"Inteligência de Dados"},{id:"servicos-juridicos",name:"Serviços Jurídicos"}]},{id:"servicos-financeiros",name:"Serviços Financeiros",subcategories:[{id:"antifraude",name:"Antifraude"},{id:"servicos-de-fidelidade-cupons-clubes-devolucao",name:"Serviços de fidelidade (cupons / clubes / devolução)"},{id:"seguro",name:"Seguro"},{id:"contabilidade-e-impostos",name:"Contabilidade e Impostos"},{id:"provedor-de-pagamento",name:"Provedor de Pagamento"}]},{id:"marketplaces",name:"Marketplaces",subcategories:[{id:"out",name:"Out"},{id:"in",name:"IN"},{id:"hub",name:"HUB"},{id:"seller-center",name:"Seller Center"}]},{id:"implementacao-e-vendas",name:"Implementação e Vendas",subcategories:[{id:"full-commerce",name:"Full Commerce"},{id:"integracao-b2b-b2c-custom-apps-mobile-apps",name:"Integração (B2B/B2C/Custom apps/Mobile apps)"},{id:"implementador-desenvolvedor",name:"Implementador / Desenvolvedor"}]}]},44:function(e,a,t){"use strict";a.a=["Argentina","Brasil","Chile","Colômbia","Romênia","Estados Unidos"]},63:function(e,a,t){"use strict";t.r(a);var n=t(29),r=t.n(n),i=t(37),c=t(9),l=t(27),s=t(0),o=t.n(s),m=t(21),u=t.n(m),d=t(54),v=t.n(d),p=t(45),b=t.n(p),f=t(28),E=t.n(f),g=t(19),h=t.n(g),N=t(46),O=t.n(N),j=t(55),w=t(5),D=t(24),y=t(47),C=t.n(y),x=t(35),I=t(39),S=t.n(I),k=t(43),R=t.n(k),A=t(56),_=t.n(A),P=t(44),F=[{value:"ISV",label:"ISV"},{value:"Agencia / Reseller",label:"Agencia / Reseller"}],L=t(38),U=t(57),B=t.n(U),q=function(){return o.a.createElement("div",{className:"ml4 flex items-center"},o.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{clipPath:"url(#clip0)"},o.a.createElement("path",{d:"M13.7262 4.39069L8.00211 10.1147L2.27804 4.39069C2.02657 4.14782 1.68977 4.01342 1.34017 4.01646C0.990566 4.0195 0.656145 4.15972 0.408931 4.40694C0.161717 4.65415 0.0214904 4.98856 0.0184525 5.33816C0.0154146 5.68775 0.149809 6.02456 0.392689 6.27603L7.05944 12.9427C7.30948 13.1927 7.64856 13.3331 8.00211 13.3331C8.35567 13.3331 8.69475 13.1927 8.94479 12.9427L15.6115 6.27603C15.7389 6.15303 15.8405 6.0059 15.9103 5.84323C15.9802 5.68056 16.017 5.5056 16.0185 5.32856C16.0201 5.15152 15.9863 4.97595 15.9193 4.81209C15.8523 4.64823 15.7533 4.49936 15.6281 4.37417C15.5029 4.24898 15.354 4.14997 15.1901 4.08293C15.0263 4.01589 14.8507 3.98215 14.6737 3.98369C14.4966 3.98523 14.3217 4.02201 14.159 4.09189C13.9963 4.16177 13.8492 4.26335 13.7262 4.39069Z",fill:"#142032"})),o.a.createElement("defs",null,o.a.createElement("clipPath",{id:"clip0"},o.a.createElement("rect",{width:"16.0002",height:"16",fill:"white"})))))},V=function(e){var a=e.value,t=e.options,n=e.onChange,r=e.disabled,i=e.errorMessage,c=e.multi,l=void 0===c||c,s=e.placeholder,m=void 0===s?"Select...":s;return o.a.createElement("div",{className:"select-input-container"},o.a.createElement(B.a,{value:a,multi:l,options:t,disabled:r,onChange:n,placeholder:m,errorMessage:i,components:{DropdownIndicator:q}}))},$=function(e){var a=e.title,t=e.imgURL;return o.a.createElement("div",{className:"image-container"},o.a.createElement("div",{className:"flex"},o.a.createElement("div",{className:"mr5 mr7-l"},o.a.createElement("figure",{className:"image-container-figure"},o.a.createElement("img",{src:t,alt:"preview"}))),o.a.createElement("div",{className:"flex flex-column justify-center w-100"},o.a.createElement("h2",{className:"ma0 mb3 image-container-title"},a))))},G=P.a.map((function(e){return{label:e,value:e}})),M=L.a.reduce((function(e,a){return Object.assign(Object.assign({},e),Object(x.a)({},a.id,a.subcategories.reduce((function(e,a){return Object.assign(Object.assign({},e),Object(x.a)({},a.id,{checked:!1,label:a.name}))}),{})))}),{}),z=function(e){var a=e.data,t=e.currentStatus,n=Object(s.useState)(M),l=Object(c.a)(n,2),m=l[0],u=l[1],d=Object(s.useState)(""),v=Object(c.a)(d,2),p=v[0],b=v[1],f=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dataentities/PN/documents/".concat(a.id,"?_fields=reasonDeny"));case 2:t=e.sent,b(t.data.reasonDeny);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=a.categories,g=a.subcategories,h=a.status;Object(s.useEffect)((function(){f(),u((function(e){var a=E.reduce((function(e,a){var t=g.find((function(e){return e.categoryID===a.id})),n=m[a.id];return t?Object.assign(Object.assign({},e),Object(x.a)({},a.id,t.subcategories.reduce((function(e,a){return Object.assign(Object.assign({},e),Object(x.a)({},a.id,{checked:!0,label:a.name}))}),Object.assign({},n)))):e}),{});return Object.assign(Object.assign({},e),a)}))}),[t,h]);var N=a.regions.map((function(e){return G.find((function(a){return a.value===e}))})).filter(Boolean),O=a.types.map((function(e){return F.find((function(a){return a.value===e}))})).filter(Boolean);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mb8"},o.a.createElement($,{title:a.name,imgURL:a.imgURL})),o.a.createElement("div",{className:"mb7 flex flex-column flex-row-l"},o.a.createElement("div",{className:"w-100 mb7 mb0-l mr7-l"},o.a.createElement(S.a,{disabled:!0,value:a.name})),o.a.createElement("div",{className:"w-100"},o.a.createElement("div",{className:"select-input-container"},o.a.createElement(V,{multi:!0,disabled:!0,options:G,value:N})))),o.a.createElement("div",{className:"mb7 flex flex-column flex-row-l"},o.a.createElement("div",{className:"w-100 mb7 mb0-l mr7-l"},o.a.createElement("div",{className:"select-input-container"},o.a.createElement(V,{multi:!0,disabled:!0,options:F,value:O}))),o.a.createElement("div",{className:"w-100"},o.a.createElement(S.a,{disabled:!0,type:"url",value:a.website}))),o.a.createElement("div",{className:"mb7 mb8-l flex"},o.a.createElement("div",{className:"w-100"},o.a.createElement(S.a,{disabled:!0,type:"email",value:a.email}))),o.a.createElement("div",{className:"mb7 about-the-partner"},o.a.createElement("h3",{className:"t-heading-3"},"About the partner"),o.a.createElement(R.a,{disabled:!0,resize:"none",value:a.description})),o.a.createElement("div",{className:"mb7 about-the-partner"},o.a.createElement("h3",{className:"t-heading-3"},"Categorias anb Subcategories"),L.a.map((function(e){var a=m[e.id];return o.a.createElement("div",{className:"mb6",key:e.id},o.a.createElement(_.a,{value:"simple",id:e.id,name:e.id,label:e.name,checkedMap:a}))}))),p&&o.a.createElement("div",{className:"mb7 about-the-partner"},o.a.createElement("h3",{className:"t-heading-3"},void 0!==t&&"DENIED"===t||"DENIED"===h?"Denial reason":"Observation"),o.a.createElement(S.a,{disabled:!0,type:"name",value:p})))},Y=function(e){var a=e.children;return o.a.createElement("h2",{className:"title"},a)},J=function(e){var a=e.children;return o.a.createElement("section",{className:"table mb7 mb8-l"},a)},Q=t(34),W=t.n(Q),T=function(e){var a=e.name,t=e.imgURL,n=e.id,r=e.handler,i=e.isActive,c=e.description,l=e.showEmptyImage,s=void 0===l||l;return o.a.createElement("div",{className:"table-row"},o.a.createElement("div",{className:"mr5 mr7-l"},o.a.createElement(W.a,{checked:i,name:a,id:n,onChange:function(){return r(n)}})),o.a.createElement("div",{className:"flex w-100 items-center"},!t&&s&&o.a.createElement("span",{className:"table-row__empty-image mr5"}),t&&o.a.createElement("div",{className:"table-row__image-container mr5"},o.a.createElement("img",{src:t,alt:a,className:"table-row__image"})),o.a.createElement("div",{className:"table-row__group"},o.a.createElement("h3",{className:"table-row__name"},a),o.a.createElement("p",{className:"table-row__short-description"},c))))};function H(){var e=Object(l.a)(['\n  query getClients($partnerID: ID) {\n    clients(partnerID: $partnerID)\n      @context(provider: "partnernetwork.vtex-services@1.x") {\n      id\n      name\n      imgURL\n      isActive\n      description\n      accountName\n    }\n  }\n']);return H=function(){return e},e}var X=Object(w.gql)(H()),Z=function(e){var a=e.partnerID,t=Object(w.useQuery)(X,{variables:{partnerID:a}}),n=t.data;return t.loading?o.a.createElement("div",{className:"flex justify-center ma6"},o.a.createElement(E.a,{color:"#f71963",size:50})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,null,"Clients"),n&&n.clients.length>0&&o.a.createElement(J,null,n.clients.map((function(e){return o.a.createElement(T,{id:e.id,handler:function(){},key:e.id,name:e.name,imgURL:e.imgURL,isActive:e.isActive,description:e.description})}))))};function K(){var e=Object(l.a)(['\n  mutation updateService($id: ID, $input: ServiceInput) {\n    updateService(id: $id, input: $input)\n      @context(provider: "partnernetwork.vtex-services@0.x") {\n      id\n      name\n      isActive\n      description\n    }\n  }\n']);return K=function(){return e},e}function ee(){var e=Object(l.a)(['\n  query getServices($partnerID: ID) {\n    services(partnerID: $partnerID)\n      @context(provider: "partnernetwork.vtex-services@1.x") {\n      id\n      name\n      isActive\n      description\n    }\n  }\n']);return ee=function(){return e},e}var ae=Object(w.gql)(ee()),te=Object(w.gql)(K()),ne=function(e){var a=e.partnerID,t=Object(w.useQuery)(ae,{variables:{partnerID:a}}),n=t.data,l=t.loading,m=t.refetch,u=Object(w.useMutation)(te),d=Object(c.a)(u,2),v=d[0],p=d[1].loading,b=Object(s.useState)([]),f=Object(c.a)(b,2),g=f[0],h=f[1];Object(s.useEffect)((function(){n&&h(n.services)}),[n,l]);var N=function(){var e=Object(i.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.map((function(e){return e.id===a?Object.assign(Object.assign({},e),{isActive:!e.isActive}):e})),h(t),n=g.find((function(e){return e.id===a})),e.prev=3,e.next=6,v({variables:{id:null==n?void 0:n.id,input:{description:null==n?void 0:n.description,isActive:!(null==n?void 0:n.isActive),name:null==n?void 0:n.name}}});case 6:return e.next=8,m();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(a){return e.apply(this,arguments)}}();return l||p?o.a.createElement("div",{className:"flex justify-center ma6"},o.a.createElement(E.a,{color:"#f71963",size:50})):0===g.length?o.a.createElement("div",{className:"flex justify-center ma6"},o.a.createElement(Y,null,"No services available for this partner")):o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,null,"Services"),g&&g.length>0&&o.a.createElement(J,null,g.map((function(e){return o.a.createElement(T,{key:e.id,id:e.id,handler:N,name:e.name,showEmptyImage:!1,isActive:e.isActive,description:e.description})}))))},re=t(58),ie=t.n(re),ce=t(59),le=t.n(ce),se=[{value:"",label:"Select"},{value:"Dados incorretos",label:"Incorrect Data"},{value:"Dados incompletos",label:"Incomplete Data"},{value:"Logo enviada fora do padrão",label:"Logo out of pattern"},{value:"Categoria principal selecionada inadequada",label:"Inappropriate selected main category"},{value:"Case dos clientes deve ser revisado",label:"Customer case must be reviewed"},{value:"Serviços descritos não estão de acordo",label:"Described services are not in agreement"}],oe=function(e){var a=e.show,t=e.onClose,n=e.onDeny,r=e.statusButton,i=Object(s.useState)(""),l=Object(c.a)(i,2),m=l[0],u=l[1],d=Object(s.useState)(""),v=Object(c.a)(d,2),p=v[0],b=v[1],f=Object(s.useState)(!1),E=Object(c.a)(f,2),g=E[0],N=E[1],O=Object(s.useState)(!1),j=Object(c.a)(O,2),w=j[0],D=j[1],y="Deny"===r;return o.a.createElement(le.a,{isOpen:a,title:y?"Are you sure you want to deny this partner?":o.a.createElement("span",null,"You are approving this partner. ",o.a.createElement("br",null),"If you have some observation, please fill the fields below."),"aria-describedby":"modal-description",responsiveFullScreen:!0,bottomBar:o.a.createElement("div",{className:"w-100 nowrap flex justify-between"},o.a.createElement("span",{className:"mr4"},o.a.createElement(h.a,{variation:"tertiary",onClick:t},"Cancel")),o.a.createElement("span",null,o.a.createElement(h.a,{variation:"danger",onClick:function(){var e=!1;y&&!m&&(N(!0),e=!0),y&&!p.length&&(D(!0),e=!0),e||(n(m,p),t())}},y?"Deny":"Approve"))),onClose:t},o.a.createElement("div",{className:"flex flex-column"},o.a.createElement("div",{className:"w-100 w-50-ns"},o.a.createElement(ie.a,{label:y?"Select the deny reason":"Select the reason for observation",options:se,value:m,required:!!y,error:g,onChange:function(e,a){return u(a)}})),o.a.createElement("div",{className:"w-100 mt5 mb5"},o.a.createElement(R.a,{required:!0,error:w,label:y?"Write some observation.":"Write some observation if necessary.",onChange:function(e){return b(e.target.value)},value:p}))))};function me(){var e=Object(l.a)(['\n  query getPartner($account: String) {\n    partner(account: $account)\n      @context(provider: "partnernetwork.vtex-services@1.x") {\n      id\n      name\n      email\n      status\n      imgURL\n      website\n      types\n      regions\n      description\n      categories {\n        id\n        name\n      }\n      subcategories {\n        categoryID\n        subcategories {\n          id\n          name\n        }\n      }\n    }\n  }\n']);return me=function(){return e},e}var ue=Object(w.gql)(me());a.default=function(){var e=Object(s.useState)(),a=Object(c.a)(e,2),t=a[0],n=a[1],l=Object(s.useState)(""),m=Object(c.a)(l,2),d=m[0],p=m[1],f=Object(s.useState)(0),g=Object(c.a)(f,2),N=g[0],y=g[1],x=Object(j.useDisclosure)(),I=x.isOpen,S=x.onOpen,k=x.onClose,R=Object(D.useRuntime)().route.params,A=Object(w.useQuery)(ue,{variables:{account:R.account}}),_=A.data,P=A.loading,F=function(e){S(),p(e)},L=function(){var e=Object(i.a)(r.a.mark((function e(a,t){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_.partner.id,"Deny"!==d){e.next=14;break}return e.prev=2,n("DENYING"),e.next=6,C.a.patch("/api/dataentities/PN/documents/".concat(i),{status:"DENIED",reasonDeny:a,observationDeny:t});case 6:n("DENIED"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n("ERROR");case 12:e.next=25;break;case 14:if("Approve"!==d){e.next=25;break}return e.prev=15,n("APPROVING"),e.next=19,C.a.patch("/api/dataentities/PN/documents/".concat(i),{status:"APPROVED",reasonDeny:a,observationDeny:t});case 19:n("SUCCESS"),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(15),n("ERROR");case 25:case"end":return e.stop()}}),e,null,[[2,9],[15,22]])})));return function(a,t){return e.apply(this,arguments)}}();return P?o.a.createElement(u.a,{variation:"full"},o.a.createElement("div",{className:"flex justify-center ma6"},o.a.createElement(E.a,{color:"#f71963",size:50}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{fullWidth:!0},o.a.createElement(b.a,{label:"Partner",active:0===N,onClick:function(){return y(0)}},o.a.createElement(u.a,{variation:"full"},o.a.createElement(z,{data:_.partner,currentStatus:t}))),o.a.createElement(b.a,{label:"Services",active:1===N,disabled:!_.partner.id,onClick:function(){return y(1)}},o.a.createElement(u.a,{variation:"full"},o.a.createElement(ne,{partnerID:_.partner.id}))),o.a.createElement(b.a,{label:"Clients",active:2===N,disabled:!_.partner.id,onClick:function(){return y(2)}},o.a.createElement(u.a,{variation:"full"},o.a.createElement(Z,{partnerID:_.partner.id})))),t&&o.a.createElement("div",{className:"mb6"},"SUCCESS"===t&&o.a.createElement(O.a,{type:"success"},"SUCCESS"),"ERROR"===t&&o.a.createElement(O.a,{type:"warning"},"ERROR"),"DENIED"===t&&o.a.createElement(O.a,{type:"error"},"DENIED")),o.a.createElement("div",{className:"actions flex flex-column-reverse flex-row-l justify-between"},o.a.createElement("div",{className:"mb3 mb0-l button-deny-container"},o.a.createElement(h.a,{variation:"danger",onClick:function(){return F("Deny")},disabled:!_.partner.id||"APPROVING"===t},"APPROVING"===t||"DENYING"===t?o.a.createElement(E.a,{color:"#FFF",size:20}):"Deny")),o.a.createElement("div",{className:"mb3 mb0-l button-save-container"},o.a.createElement(h.a,{onClick:function(){return F("Approve")},disabled:!_.partner.id||"APPROVING"===t},"APPROVING"===t||"DENYING"===t?o.a.createElement(E.a,{color:"#FFF",size:20}):"Approve"))),o.a.createElement(oe,{show:I,onClose:k,onDeny:L,statusButton:d}))}}}]);