"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createOrUpdateSKUFile = void 0;
async function createOrUpdateSKUFile(ctx) {
    const { account, partner, product: { Name }, sku: { Id: skuId }, } = ctx.state;
    if (!skuId)
        return;
    let skuFiles;
    const newFileData = {
        IsMain: true,
        Label: `${Name} logo`,
        Name: `logo_${account}`,
        Text: `${Name} logo`,
        Url: partner.imgURL,
    };
    try {
        skuFiles = await ctx.clients.catalog.getSKUFile(Number(skuId));
        if (skuFiles) {
            await ctx.clients.catalog.updateSKUFile(skuId, skuFiles[0].Id, newFileData);
        }
    }
    catch (error) {
        await ctx.clients.catalog.createSKUFile(skuId, newFileData);
    }
}
exports.createOrUpdateSKUFile = createOrUpdateSKUFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbm9kZS9taWRkbGV3YXJlcy9jcmVhdGVPclVwZGF0ZVNLVUZpbGUvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQU8sS0FBSyxVQUFVLHFCQUFxQixDQUFDLEdBQXVCO0lBQ2pFLE1BQU0sRUFDSixPQUFPLEVBQ1AsT0FBTyxFQUNQLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxFQUNqQixHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQ25CLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQTtJQUViLElBQUksQ0FBQyxLQUFLO1FBQUUsT0FBTTtJQUVsQixJQUFJLFFBQVEsQ0FBQTtJQUNaLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLE1BQU0sRUFBRSxJQUFJO1FBQ1osS0FBSyxFQUFFLEdBQUcsSUFBSSxPQUFPO1FBQ3JCLElBQUksRUFBRSxRQUFRLE9BQU8sRUFBRTtRQUN2QixJQUFJLEVBQUUsR0FBRyxJQUFJLE9BQU87UUFDcEIsR0FBRyxFQUFFLE9BQU8sQ0FBQyxNQUFNO0tBQ3BCLENBQUE7SUFFRCxJQUFJO1FBQ0YsUUFBUSxHQUFHLE1BQU0sR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1FBRTlELElBQUksUUFBUSxFQUFFO1lBQ1osTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQ3JDLEtBQUssRUFDTCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUNkLFdBQVcsQ0FDWixDQUFBO1NBQ0Y7S0FDRjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFBO0tBQzVEO0FBQ0gsQ0FBQztBQWhDRCxzREFnQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVTS1VGaWxlKGN0eDogQ3VzdG9tRXZlbnRDb250ZXh0KSB7XG4gIGNvbnN0IHtcbiAgICBhY2NvdW50LFxuICAgIHBhcnRuZXIsXG4gICAgcHJvZHVjdDogeyBOYW1lIH0sXG4gICAgc2t1OiB7IElkOiBza3VJZCB9LFxuICB9ID0gY3R4LnN0YXRlXG5cbiAgaWYgKCFza3VJZCkgcmV0dXJuXG5cbiAgbGV0IHNrdUZpbGVzXG4gIGNvbnN0IG5ld0ZpbGVEYXRhID0ge1xuICAgIElzTWFpbjogdHJ1ZSxcbiAgICBMYWJlbDogYCR7TmFtZX0gbG9nb2AsXG4gICAgTmFtZTogYGxvZ29fJHthY2NvdW50fWAsXG4gICAgVGV4dDogYCR7TmFtZX0gbG9nb2AsXG4gICAgVXJsOiBwYXJ0bmVyLmltZ1VSTCxcbiAgfVxuXG4gIHRyeSB7XG4gICAgc2t1RmlsZXMgPSBhd2FpdCBjdHguY2xpZW50cy5jYXRhbG9nLmdldFNLVUZpbGUoTnVtYmVyKHNrdUlkKSlcblxuICAgIGlmIChza3VGaWxlcykge1xuICAgICAgYXdhaXQgY3R4LmNsaWVudHMuY2F0YWxvZy51cGRhdGVTS1VGaWxlKFxuICAgICAgICBza3VJZCxcbiAgICAgICAgc2t1RmlsZXNbMF0uSWQsXG4gICAgICAgIG5ld0ZpbGVEYXRhXG4gICAgICApXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IGN0eC5jbGllbnRzLmNhdGFsb2cuY3JlYXRlU0tVRmlsZShza3VJZCwgbmV3RmlsZURhdGEpXG4gIH1cbn1cbiJdfQ==